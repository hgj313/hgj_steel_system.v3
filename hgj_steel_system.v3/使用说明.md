# 钢材采购优化系统 V3.0 使用说明

## 系统概述

钢材采购优化系统 V3.0 是一个现代化的钢材采购和优化管理平台，采用模块化架构，支持智能优化算法和约束条件设置。

## 系统启动

### 前置条件
- Node.js 16+ 
- npm 8+
- 确保端口 3000（前端）和 5000（后端）未被占用

### 启动步骤

1. **启动整个系统**
   ```bash
   npm start
   ```

2. **分别启动前后端**
   ```bash
   # 启动后端服务器
   npm run server
   
   # 启动前端应用（新终端窗口）
   npm run client
   ```

3. **访问应用**
   - 前端地址：http://localhost:3000
   - 后端API：http://localhost:5000/api

## 核心功能使用指南

### 1. 首页 (HomePage)

首页提供系统概览和快速操作入口：

- **统计数据**：查看总优化次数、节省成本、优化效率等关键指标
- **快速操作**：
  - 🚀 开始优化：直接跳转到优化配置页面
  - 📊 查看结果：查看最新的优化结果
  - 📋 历史记录：查看过往优化历史
- **活动动态**：显示最近的系统活动和操作记录

### 2. 优化配置页面 (OptimizationPage) - 核心功能

这是系统的核心页面，包含您询问的**数据上传按钮**和**参数约束设置**功能：

#### 步骤1: 上传钢材清单 📤

**设计钢材清单上传**
- 点击左侧上传区域
- 支持格式：Excel (.xlsx, .xls) 和 CSV 文件
- 文件大小限制：10MB
- 拖拽或点击上传

**模数钢材清单上传**
- 点击右侧上传区域
- 同样支持 Excel 和 CSV 格式
- 系统会自动验证文件格式

#### 步骤2: 约束条件设置 ⚙️

**默认约束条件**
- 焊接长度约束：最小100mm，最大6000mm
- 损耗率约束：最大5%

**约束条件管理**
- ➕ **添加约束**：点击"添加约束"按钮
- ✏️ **编辑约束**：点击表格中的"编辑"按钮
- 🔄 **启用/禁用**：使用开关切换约束状态
- 🗑️ **删除约束**：点击删除按钮移除约束

**支持的约束类型**
- 焊接长度约束
- 损耗率约束
- 数量约束
- 尺寸约束

#### 步骤3: 优化设置 🎯

**优化策略选择**
- 成本优先：最小化采购成本
- 平衡优化：成本与效率平衡
- 速度优先：最快完成优化

**高级参数**
- 最大迭代次数：控制算法运行深度
- 收敛精度：设置算法精度要求

#### 步骤4: 执行优化 🚀

- 确保已上传两个钢材清单文件
- 点击"开始优化"按钮
- 实时查看优化进度条
- 可以随时点击"取消优化"中止操作

### 3. 系统设置页面 (SettingsPage) - 全局配置

#### 系统参数设置
- **优化引擎设置**：配置默认优化策略、迭代次数等
- **系统行为设置**：并行处理、日志级别、结果保留等
- **API配置**：后端服务连接设置

#### 约束条件管理
- **系统级约束**：设置全局默认约束条件
- **约束分类**：焊接、优化、材料、工艺四大类别
- **约束状态**：快速启用或禁用特定约束

#### 数据管理
- **数据清理**：清理过期结果和临时文件
- **数据备份**：导出/导入系统配置

### 4. 结果查看页面 (ResultsPage)

- 查看优化结果详情
- 生成优化报告
- 导出Excel或PDF报告

### 5. 历史记录页面 (HistoryPage)

- 浏览所有历史优化任务
- 对比不同优化方案
- 重新执行历史配置

## 常见问题解决

### Q1: 为什么看不到数据上传按钮？
**A**: 请确保：
1. 前端应用已正常启动（访问 http://localhost:3000）
2. 导航到"优化配置"页面（/optimization）
3. 查看"步骤1: 上传钢材清单"部分

### Q2: 约束设置功能在哪里？
**A**: 约束设置有两个位置：
1. **任务级约束**：在优化配置页面的"步骤2: 约束条件设置"
2. **系统级约束**：在系统设置页面的"约束条件"标签页

### Q3: 前端启动失败，显示端口被占用
**A**: 解决方法：
1. 关闭占用3000端口的其他应用
2. 或使用环境变量指定其他端口：`PORT=3001 npm start`

### Q4: 上传文件后没有反应
**A**: 请检查：
1. 文件格式是否正确（Excel或CSV）
2. 文件大小是否超过10MB
3. 后端服务是否正常运行（http://localhost:5000/api/health）

### Q5: 优化按钮被禁用
**A**: 确保：
1. 已上传设计钢材清单
2. 已上传模数钢材清单
3. 两个文件都上传成功

## 技术特性

- 🎨 现代化苹果风格UI设计
- 🌙 支持深色模式切换
- 📱 响应式设计，支持移动端
- ⚡ 实时优化进度显示
- 🔄 智能约束条件管理
- 📊 可视化数据展示
- 🚀 高性能优化算法

## 系统架构

- **前端**：React 18 + TypeScript + Ant Design
- **后端**：Node.js + Express
- **优化引擎**：智能算法 V3.0
- **数据格式**：支持Excel、CSV文件

## 联系支持

如遇到问题，请：
1. 检查浏览器控制台错误信息
2. 查看后端服务器日志
3. 确认系统健康状态：访问 http://localhost:5000/api/health

---

**版本信息**: V3.0.0  
**更新日期**: 2024年  
**技术支持**: HGJ313钢材系统 